# 主从复制架构
## 基本概念
主从复制是指将一台服务器的数据复制到其他的服务器。前者称为 主节点(master)，后者称为 从节点(replication)。数据复制是单向的，只能从主节点向从节点复制，主节点主要负责写，从节点主要负责读。在实际应用中，大多数情况都是读操作。
默认情况下，每台 Redis 服务器都可以成为主节点，每个主节点有多个从节点，但一个从节点只能有一个主节点。
## 主从复制解决的问题
• 数据冗余
     主从复制实现了数据的热备份，是除持久化外的一种数据冗余方式。
• 故障恢复
主节点出现问题，从节点可以提供服务，实现故障恢复。
• 高并发，读写分离
主从节点分别负责写和读的操作，实现了 读写分离 。
• 高可用（集群）的基石
主从复制是 集群和哨兵模式 的基础。
## 一主两从架构搭建
### 准备工作
假设 6379 的 Redis 作为主节点，配置两台从节点 6901 和 6902 。由于是在一台服务器上配置主从架构，是一种 伪集群 。主从架构如下图所示：
拷贝 redis.conf 并修改配置即可
$ cp redis.conf redis-cluster-config/replica-6901.conf #从节点1的配置文件
$ cp redis.conf redis-cluster-config/replica-6902.conf #从节点2的配置文件
配置文件配置（永久）
配置文件中主从复制相关配置在 REPLICATION 选项下。
以 6901(replication) 为例，首先要修改端口号和进程文件，也可以修改对应的 dir 目录，
